using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Calcularoa_C_S2_Tr1.Modelos;

namespace Calcularoa_C_S2_Tr1.Controladores
{
 public class Controlador_con
 {
     // Parsea la expresión y devuelve un objeto Guardar_numero_signo
     public Guardar_numero_signo ParseExpression(string expr)
     {
         if (expr == null)
         expr = string.Empty;

         expr = expr.Trim();

         var result = new Guardar_numero_signo();

         var numbers = new List<decimal>();
         var operators = new List<char>();

         string num = "";
         foreach (char c in expr)
         {
             if (char.IsDigit(c) || c == '.')
             {
                num += c;
             }
            else
            {
                if (num != "")
            {
                numbers.Add(decimal.Parse(num, CultureInfo.InvariantCulture));
                num = "";
            }
                operators.Add(c);
            }
         }
         if (num != "")
            numbers.Add(decimal.Parse(num, CultureInfo.InvariantCulture));

            result.Numbers = numbers;
            result.Operators = operators;

     return result;
     }
 }
}
